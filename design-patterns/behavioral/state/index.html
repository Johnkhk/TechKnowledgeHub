
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../observer/" rel="prev"/>
<link href="../strategy/" rel="next"/>
<link href="../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.0, mkdocs-material-9.5.26" name="generator"/>
<title>State - Tech Knowledge Hub</title>
<link href="../../../assets/stylesheets/main.6543a935.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#state-pattern">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Tech Knowledge Hub" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="Tech Knowledge Hub">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Tech Knowledge Hub
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              State
            
          </span>
</div>
</div>
</div>
<script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Tech Knowledge Hub" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="Tech Knowledge Hub">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    Tech Knowledge Hub
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
<span class="md-ellipsis">
    Home
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    Design Patterns
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Design Patterns
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../design-patterns/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
<span class="md-ellipsis">
    Creational
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
            Creational
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../creational/singleton/">
<span class="md-ellipsis">
    Singleton
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../creational/factory-method/">
<span class="md-ellipsis">
    Factory Method
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../creational/abstract-factory/">
<span class="md-ellipsis">
    Abstract Factory
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../creational/builder/">
<span class="md-ellipsis">
    Builder
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../creational/prototype/">
<span class="md-ellipsis">
    Prototype
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../creational/object-pool/">
<span class="md-ellipsis">
    Object Pool
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
<span class="md-ellipsis">
    Structural
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
            Structural
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../structural/adapter/">
<span class="md-ellipsis">
    Adapter
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../structural/bridge/">
<span class="md-ellipsis">
    Bridge
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../structural/composite/">
<span class="md-ellipsis">
    Composite
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../structural/decorator/">
<span class="md-ellipsis">
    Decorator
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../structural/facade/">
<span class="md-ellipsis">
    Facade
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../structural/flyweight/">
<span class="md-ellipsis">
    Flyweight
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../structural/proxy/">
<span class="md-ellipsis">
    Proxy
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
<span class="md-ellipsis">
    Behavioral
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_4">
<span class="md-nav__icon md-icon"></span>
            Behavioral
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../chain-of-responsibility/">
<span class="md-ellipsis">
    Chain of Responsibility
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../command/">
<span class="md-ellipsis">
    Command
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../iterator/">
<span class="md-ellipsis">
    Iterator
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../mediator/">
<span class="md-ellipsis">
    Mediator
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../memento/">
<span class="md-ellipsis">
    Memento
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../observer/">
<span class="md-ellipsis">
    Observer
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    State
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    State
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#description">
<span class="md-ellipsis">
      Description
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#benefits">
<span class="md-ellipsis">
      Benefits
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#example">
<span class="md-ellipsis">
      Example
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#implementation">
<span class="md-ellipsis">
      Implementation
    </span>
</a>
<nav aria-label="Implementation" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#diagram">
<span class="md-ellipsis">
      Diagram
    </span>
</a>
<nav aria-label="Diagram" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#state-diagram-of-example">
<span class="md-ellipsis">
      State Diagram Of Example
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#code-implementation">
<span class="md-ellipsis">
      Code Implementation
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#code-usage">
<span class="md-ellipsis">
      Code Usage
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../strategy/">
<span class="md-ellipsis">
    Strategy
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../template-method/">
<span class="md-ellipsis">
    Template Method
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../visitor/">
<span class="md-ellipsis">
    Visitor
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../system-design/">
<span class="md-ellipsis">
    System Design
  </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#description">
<span class="md-ellipsis">
      Description
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#benefits">
<span class="md-ellipsis">
      Benefits
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#example">
<span class="md-ellipsis">
      Example
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#implementation">
<span class="md-ellipsis">
      Implementation
    </span>
</a>
<nav aria-label="Implementation" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#diagram">
<span class="md-ellipsis">
      Diagram
    </span>
</a>
<nav aria-label="Diagram" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#state-diagram-of-example">
<span class="md-ellipsis">
      State Diagram Of Example
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#code-implementation">
<span class="md-ellipsis">
      Code Implementation
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#code-usage">
<span class="md-ellipsis">
      Code Usage
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="state-pattern">State Pattern<a class="headerlink" href="#state-pattern" title="Permanent link">¶</a></h1>
<h2 id="description">Description<a class="headerlink" href="#description" title="Permanent link">¶</a></h2>
<p>State is a behavioral design pattern that lets an object alter its behavior when its internal state changes. It appears as if the object changed its class. (Similar to Finite State Machine)</p>
<p>There are states and predetermined transitions between them. </p>
<p>State machines are usually implemented with lots of conditional statements (if or switch) that select the appropriate behavior depending on the current state of the object. Usually, this “state” is just a set of values of the object’s fields.</p>
<p>The State pattern suggests that you create new classes for all possible states of an object and extract all state-specific behaviors into these classes.</p>
<p>Instead of implementing all behaviors on its own, the original object, called context, stores a reference to one of the state objects that represents its current state, and delegates all the state-related work to that object.</p>
<p>To transition the context to another state, replace the active state object with another object that represents that new state. (only if all state classes follow the same interface and the context itself works with these objects through that interface).</p>
<p>May look similar to <a href="/design-patterns/behavioral/strategy.md">Strategy</a> except states may be aware of each other and initiate transitions from one state to another, whereas strategies almost never know about each other.</p>
<p>Similar to <a href="/design-patterns/structural/bridge.md">Bridge</a>, <a href="/design-patterns/behavioral/state.md">State</a>, and <a href="/design-patterns/behavioral/strategy.md">Strategy</a>, and to some degree <a href="/design-patterns/structural/adapter.md">adapter</a>, all these patterns use composition to delegate some work to another object.</p>
<h2 id="benefits">Benefits<a class="headerlink" href="#benefits" title="Permanent link">¶</a></h2>
<ol>
<li><strong>Single Responsibility Principle</strong>: Organize the code related to particular states into separate classes.</li>
<li>Simplify the code of the context by eliminating bulky state machine conditionals.</li>
</ol>
<h2 id="example">Example<a class="headerlink" href="#example" title="Permanent link">¶</a></h2>
<p>Let's say you have a vending machine with one type of product, and 4 states:</p>
<ul>
<li><code>hasItem</code> - when the machine has the product.</li>
<li><code>noItem</code> - when the machine is out of the product.</li>
<li><code>itemRequested</code> - when the user requests the product.</li>
<li><code>hasMoney</code> - when the machine has money.</li>
</ul>
<p>and 4 actions:</p>
<ul>
<li><code>Add the item</code></li>
<li><code>Select the item</code></li>
<li><code>Insert money</code></li>
<li><code>Dispense item</code></li>
</ul>
<p>Let’s say vending machine is in itemRequested. Once the “Insert Money” occurs, the machine moves to <code>hasMoney</code>.</p>
<p>In this example:</p>
<ul>
<li><code>VendingMachine</code> is the context that delegates state-specific behaviors to different state objects.</li>
<li><code>State</code> is the interface that all concrete states should implement.</li>
<li><code>HasItem</code>, <code>NoItem</code>, <code>ItemRequested</code>, and <code>HasMoney</code> are concrete states that implement the <code>State</code> interface.</li>
<li><code>addItem()</code>, <code>insertMoney()</code>, <code>selectItem()</code>, and <code>dispenseItem()</code> are actions that the <code>VendingMachine</code> can perform.</li>
</ul>
<h2 id="implementation">Implementation<a class="headerlink" href="#implementation" title="Permanent link">¶</a></h2>
<ul>
<li><code>VendingMachine</code> has a <code>currentState</code> property that stores a reference to the current state object.</li>
<li>For ease of access, <code>VendingMachine</code> also has methods to perform actions like <code>addItem()</code>, <code>insertMoney()</code>, <code>selectItem()</code>, and <code>dispenseItem()</code>, which just calls the same method on the current state object.</li>
<li><code>VendorMachine</code> also has a <code>setState()</code> method to change the current state.</li>
<li><code>State</code> is an interface that defines a method for <strong>each action</strong>.</li>
<li>Each concrete state also has a reference to the <code>VendingMachine</code> object to change the state of the machine.</li>
</ul>
<p>The code of the vending machine is not polluted with this logics, all the state-dependent code lives in respective state implementations</p>
<h3 id="diagram">Diagram<a class="headerlink" href="#diagram" title="Permanent link">¶</a></h3>
<pre class="mermaid"><code>classDiagram
    class VendingMachine {
        -State hasItem
        -State noItem
        -State itemRequested
        -State hasMoney
        -State currentState
        +setState(State state)
        +addItem()
        +selectItem()
        +insertMoney()
        +dispenseItem()
    }

    class State {
        +addItem()
        +selectItem()
        +insertMoney()
        +dispenseItem()
    }

    class HasItem {
        -VendingMachine vm
        +addItem()
        +selectItem()
        +insertMoney()
        +dispenseItem()
    }

    class NoItem {
        -VendingMachine vm
        +addItem()
        +selectItem()
        +insertMoney()
        +dispenseItem()
    }

    class ItemRequested {
        -VendingMachine vm
        +addItem()
        +selectItem()
        +insertMoney()
        +dispenseItem()
    }

    class HasMoney {
        -VendingMachine vm
        +addItem()
        +selectItem()
        +insertMoney()
        +dispenseItem()
    }

    VendingMachine --&gt; State
    State &lt;|-- HasItem
    State &lt;|-- NoItem
    State &lt;|-- ItemRequested
    State &lt;|-- HasMoney
</code></pre>
<h4 id="state-diagram-of-example">State Diagram Of Example<a class="headerlink" href="#state-diagram-of-example" title="Permanent link">¶</a></h4>
<pre class="mermaid"><code>stateDiagram-v2
    [*] --&gt; NoItem
    NoItem --&gt; HasItem : Add item
    HasItem --&gt; ItemRequested : Select item
    ItemRequested --&gt; HasMoney : Insert money
    HasMoney --&gt; NoItem : Dispense item
    HasItem --&gt; HasItem : Add item
    ItemRequested --&gt; ItemRequested : Select item
    ItemRequested --&gt; ItemRequested : Add item
    HasMoney --&gt; HasMoney : Insert money
    HasMoney --&gt; HasMoney : Select item
    NoItem --&gt; NoItem : Select item
    NoItem --&gt; NoItem : Insert money
    NoItem --&gt; NoItem : Dispense item
</code></pre>
<h3 id="code-implementation">Code Implementation<a class="headerlink" href="#code-implementation" title="Permanent link">¶</a></h3>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"><input id="__tabbed_1_2" name="__tabbed_1" type="radio"><div class="tabbed-labels"><label for="__tabbed_1_1">Python</label><label for="__tabbed_1_2">Go</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>


<span class="c1"># State Interface</span>
<span class="k">class</span> <span class="nc">State</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vendingMachine</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vendingMachine</span> <span class="o">=</span> <span class="n">vendingMachine</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">addItem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">selectItem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">insertMoney</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">dispenseItem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>


<span class="c1"># Concrete States</span>
<span class="k">class</span> <span class="nc">HasItem</span><span class="p">(</span><span class="n">State</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">addItem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Item already present."</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">selectItem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Item selected."</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vendingMachine</span><span class="o">.</span><span class="n">setState</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vendingMachine</span><span class="o">.</span><span class="n">itemRequestedState</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">insertMoney</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Select an item first."</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">dispenseItem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Select an item first."</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">NoItem</span><span class="p">(</span><span class="n">State</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">addItem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Item added."</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vendingMachine</span><span class="o">.</span><span class="n">setState</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vendingMachine</span><span class="o">.</span><span class="n">hasItemState</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">selectItem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"No item to select."</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">insertMoney</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"No item to buy."</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">dispenseItem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"No item to dispense."</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">ItemRequested</span><span class="p">(</span><span class="n">State</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">addItem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Item already requested."</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">selectItem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Item already selected."</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">insertMoney</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Money inserted."</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vendingMachine</span><span class="o">.</span><span class="n">setState</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vendingMachine</span><span class="o">.</span><span class="n">hasMoneyState</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">dispenseItem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Insert money first."</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">HasMoney</span><span class="p">(</span><span class="n">State</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">addItem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Item already requested."</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">selectItem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Item already selected."</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">insertMoney</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Money already inserted."</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">dispenseItem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Dispensing item."</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vendingMachine</span><span class="o">.</span><span class="n">setState</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vendingMachine</span><span class="o">.</span><span class="n">noItemState</span><span class="p">)</span>


<span class="c1"># Vending Machine as a Context and a State</span>
<span class="k">class</span> <span class="nc">VendingMachine</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hasItemState</span> <span class="o">=</span> <span class="n">HasItem</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">noItemState</span> <span class="o">=</span> <span class="n">NoItem</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itemRequestedState</span> <span class="o">=</span> <span class="n">ItemRequested</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hasMoneyState</span> <span class="o">=</span> <span class="n">HasMoney</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">currentState</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">noItemState</span>

    <span class="k">def</span> <span class="nf">setState</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentState</span> <span class="o">=</span> <span class="n">state</span>

    <span class="k">def</span> <span class="nf">addItem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentState</span><span class="o">.</span><span class="n">addItem</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">selectItem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentState</span><span class="o">.</span><span class="n">selectItem</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">insertMoney</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentState</span><span class="o">.</span><span class="n">insertMoney</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">dispenseItem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentState</span><span class="o">.</span><span class="n">dispenseItem</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">"fmt"</span>

<span class="c1">// State interface</span>
<span class="kd">type</span><span class="w"> </span><span class="nx">State</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">AddItem</span><span class="p">()</span>
<span class="w">    </span><span class="nx">SelectItem</span><span class="p">()</span>
<span class="w">    </span><span class="nx">InsertMoney</span><span class="p">()</span>
<span class="w">    </span><span class="nx">DispenseItem</span><span class="p">()</span>
<span class="p">}</span>

<span class="c1">// VendingMachine struct</span>
<span class="kd">type</span><span class="w"> </span><span class="nx">VendingMachine</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">hasItemState</span><span class="w">       </span><span class="nx">State</span>
<span class="w">    </span><span class="nx">noItemState</span><span class="w">        </span><span class="nx">State</span>
<span class="w">    </span><span class="nx">itemRequestedState</span><span class="w"> </span><span class="nx">State</span>
<span class="w">    </span><span class="nx">hasMoneyState</span><span class="w">      </span><span class="nx">State</span>

<span class="w">    </span><span class="nx">currentState</span><span class="w"> </span><span class="nx">State</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">NewVendingMachine</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="nx">VendingMachine</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">v</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">VendingMachine</span><span class="p">{}</span>
<span class="w">    </span><span class="nx">hasItemState</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">HasItemState</span><span class="p">{</span><span class="nx">vendingMachine</span><span class="p">:</span><span class="w"> </span><span class="nx">v</span><span class="p">}</span>
<span class="w">    </span><span class="nx">noItemState</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">NoItemState</span><span class="p">{</span><span class="nx">vendingMachine</span><span class="p">:</span><span class="w"> </span><span class="nx">v</span><span class="p">}</span>
<span class="w">    </span><span class="nx">itemRequestedState</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">ItemRequestedState</span><span class="p">{</span><span class="nx">vendingMachine</span><span class="p">:</span><span class="w"> </span><span class="nx">v</span><span class="p">}</span>
<span class="w">    </span><span class="nx">hasMoneyState</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">HasMoneyState</span><span class="p">{</span><span class="nx">vendingMachine</span><span class="p">:</span><span class="w"> </span><span class="nx">v</span><span class="p">}</span>

<span class="w">    </span><span class="nx">v</span><span class="p">.</span><span class="nx">hasItemState</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">hasItemState</span>
<span class="w">    </span><span class="nx">v</span><span class="p">.</span><span class="nx">noItemState</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">noItemState</span>
<span class="w">    </span><span class="nx">v</span><span class="p">.</span><span class="nx">itemRequestedState</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">itemRequestedState</span>
<span class="w">    </span><span class="nx">v</span><span class="p">.</span><span class="nx">hasMoneyState</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">hasMoneyState</span>

<span class="w">    </span><span class="nx">v</span><span class="p">.</span><span class="nx">currentState</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">noItemState</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">v</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">v</span><span class="w"> </span><span class="o">*</span><span class="nx">VendingMachine</span><span class="p">)</span><span class="w"> </span><span class="nx">SetState</span><span class="p">(</span><span class="nx">state</span><span class="w"> </span><span class="nx">State</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">v</span><span class="p">.</span><span class="nx">currentState</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">state</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">v</span><span class="w"> </span><span class="o">*</span><span class="nx">VendingMachine</span><span class="p">)</span><span class="w"> </span><span class="nx">AddItem</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">v</span><span class="p">.</span><span class="nx">currentState</span><span class="p">.</span><span class="nx">AddItem</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">v</span><span class="w"> </span><span class="o">*</span><span class="nx">VendingMachine</span><span class="p">)</span><span class="w"> </span><span class="nx">SelectItem</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">v</span><span class="p">.</span><span class="nx">currentState</span><span class="p">.</span><span class="nx">SelectItem</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">v</span><span class="w"> </span><span class="o">*</span><span class="nx">VendingMachine</span><span class="p">)</span><span class="w"> </span><span class="nx">InsertMoney</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">v</span><span class="p">.</span><span class="nx">currentState</span><span class="p">.</span><span class="nx">InsertMoney</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">v</span><span class="w"> </span><span class="o">*</span><span class="nx">VendingMachine</span><span class="p">)</span><span class="w"> </span><span class="nx">DispenseItem</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">v</span><span class="p">.</span><span class="nx">currentState</span><span class="p">.</span><span class="nx">DispenseItem</span><span class="p">()</span>
<span class="p">}</span>

<span class="c1">// Concrete States</span>
<span class="kd">type</span><span class="w"> </span><span class="nx">HasItemState</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">vendingMachine</span><span class="w"> </span><span class="o">*</span><span class="nx">VendingMachine</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="nx">HasItemState</span><span class="p">)</span><span class="w"> </span><span class="nx">AddItem</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"Item already present."</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="nx">HasItemState</span><span class="p">)</span><span class="w"> </span><span class="nx">SelectItem</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"Item selected."</span><span class="p">)</span>
<span class="w">    </span><span class="nx">s</span><span class="p">.</span><span class="nx">vendingMachine</span><span class="p">.</span><span class="nx">SetState</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">vendingMachine</span><span class="p">.</span><span class="nx">itemRequestedState</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="nx">HasItemState</span><span class="p">)</span><span class="w"> </span><span class="nx">InsertMoney</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"Select an item first."</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="nx">HasItemState</span><span class="p">)</span><span class="w"> </span><span class="nx">DispenseItem</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"Select an item first."</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">NoItemState</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">vendingMachine</span><span class="w"> </span><span class="o">*</span><span class="nx">VendingMachine</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="nx">NoItemState</span><span class="p">)</span><span class="w"> </span><span class="nx">AddItem</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"Item added."</span><span class="p">)</span>
<span class="w">    </span><span class="nx">s</span><span class="p">.</span><span class="nx">vendingMachine</span><span class="p">.</span><span class="nx">SetState</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">vendingMachine</span><span class="p">.</span><span class="nx">hasItemState</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="nx">NoItemState</span><span class="p">)</span><span class="w"> </span><span class="nx">SelectItem</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"No item to select."</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="nx">NoItemState</span><span class="p">)</span><span class="w"> </span><span class="nx">InsertMoney</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"No item to buy."</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="nx">NoItemState</span><span class="p">)</span><span class="w"> </span><span class="nx">DispenseItem</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"No item to dispense."</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">ItemRequestedState</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">vendingMachine</span><span class="w"> </span><span class="o">*</span><span class="nx">VendingMachine</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="nx">ItemRequestedState</span><span class="p">)</span><span class="w"> </span><span class="nx">AddItem</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"Item already requested."</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="nx">ItemRequestedState</span><span class="p">)</span><span class="w"> </span><span class="nx">SelectItem</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"Item already selected."</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="nx">ItemRequestedState</span><span class="p">)</span><span class="w"> </span><span class="nx">InsertMoney</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"Money inserted."</span><span class="p">)</span>
<span class="w">    </span><span class="nx">s</span><span class="p">.</span><span class="nx">vendingMachine</span><span class="p">.</span><span class="nx">SetState</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">vendingMachine</span><span class="p">.</span><span class="nx">hasMoneyState</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="nx">ItemRequestedState</span><span class="p">)</span><span class="w"> </span><span class="nx">DispenseItem</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"Insert money first."</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">HasMoneyState</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">vendingMachine</span><span class="w"> </span><span class="o">*</span><span class="nx">VendingMachine</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="nx">HasMoneyState</span><span class="p">)</span><span class="w"> </span><span class="nx">AddItem</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"Item already requested."</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="nx">HasMoneyState</span><span class="p">)</span><span class="w"> </span><span class="nx">SelectItem</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"Item already selected."</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="nx">HasMoneyState</span><span class="p">)</span><span class="w"> </span><span class="nx">InsertMoney</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"Money already inserted."</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="nx">HasMoneyState</span><span class="p">)</span><span class="w"> </span><span class="nx">DispenseItem</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"Dispensing item."</span><span class="p">)</span>
<span class="w">    </span><span class="nx">s</span><span class="p">.</span><span class="nx">vendingMachine</span><span class="p">.</span><span class="nx">SetState</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">vendingMachine</span><span class="p">.</span><span class="nx">noItemState</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
</input></input></div>
<h3 id="code-usage">Code Usage<a class="headerlink" href="#code-usage" title="Permanent link">¶</a></h3>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio"><input id="__tabbed_2_2" name="__tabbed_2" type="radio"><div class="tabbed-labels"><label for="__tabbed_2_1">Python</label><label for="__tabbed_2_2">Go</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">state</span> <span class="kn">import</span> <span class="n">VendingMachine</span>

<span class="c1"># Example usage</span>
<span class="n">vendingMachine</span> <span class="o">=</span> <span class="n">VendingMachine</span><span class="p">()</span>

<span class="n">vendingMachine</span><span class="o">.</span><span class="n">addItem</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vendingMachine</span><span class="o">.</span><span class="n">currentState</span><span class="p">)</span>
<span class="n">vendingMachine</span><span class="o">.</span><span class="n">selectItem</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vendingMachine</span><span class="o">.</span><span class="n">currentState</span><span class="p">)</span>
<span class="n">vendingMachine</span><span class="o">.</span><span class="n">insertMoney</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vendingMachine</span><span class="o">.</span><span class="n">currentState</span><span class="p">)</span>
<span class="n">vendingMachine</span><span class="o">.</span><span class="n">dispenseItem</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vendingMachine</span><span class="o">.</span><span class="n">currentState</span><span class="p">)</span>
<span class="n">vendingMachine</span><span class="o">.</span><span class="n">addItem</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="c1">// Example usage</span>
<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">vendingMachine</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">NewVendingMachine</span><span class="p">()</span>

<span class="w">    </span><span class="nx">vendingMachine</span><span class="p">.</span><span class="nx">AddItem</span><span class="p">()</span>
<span class="w">    </span><span class="nx">vendingMachine</span><span class="p">.</span><span class="nx">SelectItem</span><span class="p">()</span>
<span class="w">    </span><span class="nx">vendingMachine</span><span class="p">.</span><span class="nx">InsertMoney</span><span class="p">()</span>
<span class="w">    </span><span class="nx">vendingMachine</span><span class="p">.</span><span class="nx">DispenseItem</span><span class="p">()</span>
<span class="w">    </span><span class="nx">vendingMachine</span><span class="p">.</span><span class="nx">AddItem</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
</input></input></div>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../../assets/javascripts/bundle.ad660dcc.min.js"></script>
<script type="module">import mermaid from "https://unpkg.com/mermaid@10.4.0/dist/mermaid.esm.min.mjs";
window.mermaidConfig = {default: {
    startOnLoad: false
}};</script></body>
</html>